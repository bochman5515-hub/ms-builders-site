<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã ‚Äî MS Builders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- –®—Ä–∏—Ñ—Ç—ã –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
  <link rel="icon" href="msb.png">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:"Montserrat",system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background-color:#0b0f19;
      color:#e5e7eb;
    }

    .layout{ display:flex; min-height:100vh; }

    /* ===== –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ ===== */
    .sidebar{
      width:260px;
      background:#020617;
      padding:24px 20px;
      display:flex;
      flex-direction:column;
      gap:18px;
      transition:width .2s ease,padding .2s ease;
      border-right:1px solid rgba(148,163,184,.12);
      overflow:hidden;
    }

    .logo-box{ display:flex; align-items:center; gap:12px; }
    .logo-box img{ width:96px; height:96px; border-radius:10px; object-fit:cover; }

    .sidebar-title{ font-size:16px; font-weight:600; line-height:1.3; }
    .sidebar-title span{ display:block; font-size:12px; color:#9ca3af; font-weight:400; }

    .server-copy{
      margin-top:8px;
      width:100%;
      text-align:left;
      border:1px solid rgba(148,163,184,.22);
      background:rgba(15,23,42,.55);
      color:#e5e7eb;
      border-radius:14px;
      padding:10px 12px;
      cursor:pointer;
      transition:.15s;
      position:relative;
    }
    .server-copy:hover{ border-color:#38bdf8; background:rgba(15,23,42,.7); }
    .server-ip{ display:block; font-weight:700; letter-spacing:.02em; }
    .server-ver{ display:block; margin-top:2px; font-size:12px; color:#9ca3af; }

    .server-tip{
      position:absolute;
      right:10px;
      top:10px;
      font-size:11px;
      color:#a5b4fc;
      opacity:0;
      transform:translateY(-2px);
      transition:.18s;
      pointer-events:none;
    }
    .server-copy.copied .server-tip{ opacity:1; transform:translateY(0); }

    .sidebar-nav{ display:flex; flex-direction:column; gap:8px; margin-top:6px; }
    .sidebar-nav a{
      color:#e5e7eb;
      text-decoration:none;
      font-size:14px;
      padding:6px 0;
      border-left:3px solid transparent;
      padding-left:10px;
      transition:.15s;
      white-space:nowrap;
    }
    .sidebar-nav a:hover{ color:#38bdf8; border-color:#38bdf8; }
    .sidebar-nav a.active{ color:#38bdf8; border-color:#38bdf8; font-weight:600; }

    .sidebar-collapsed .sidebar{ width:0; padding:0; border-right:none; }

    /* ===== –ö–ù–û–ü–ö–ê < > –°–ù–ò–ó–£ –°–õ–ï–í–ê ===== */
    .sidebar-fab{
      position:fixed;
      left:14px;
      bottom:14px;
      z-index:95;
      width:44px;
      height:44px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.35);
      background:rgba(2,6,23,0.78);
      backdrop-filter:blur(8px);
      color:#e5e7eb;
      cursor:pointer;
      display:grid;
      place-items:center;
      transition:.15s;
      box-shadow:0 10px 22px rgba(0,0,0,0.25);
    }
    .sidebar-fab:hover{ border-color:#38bdf8; color:#e0f2fe; }
    .sidebar-fab span{ font-size:18px; line-height:1; transform:translateY(-1px); }

    /* ===== –ü–†–ê–í–ê–Ø –ß–ê–°–¢–¨ ===== */
    .content{
      flex:1;
      background:
        linear-gradient(to bottom, rgba(15,23,42,0.9), rgba(15,23,42,1)),
        url("bg-stone.png");
      background-size:auto,128px 128px;
      background-repeat:repeat;
      padding-bottom:40px;
    }

    /* ===== –ë–ê–ù–ù–ï–† ===== */
    .hero{ position:relative; height:240px; overflow:hidden; }
    .hero img{ width:100%; height:100%; object-fit:cover; display:block; }
    .hero-overlay{
      position:absolute;
      inset:0;
      background:linear-gradient(to right, rgba(15,23,42,0.7), transparent);
      display:flex;
      flex-direction:column;
      justify-content:center;
      padding:0 24px 0 40px;
      gap:10px;
    }
    .hero-title{
      font-family:"Press Start 2P",system-ui;
      font-size:18px;
      text-transform:uppercase;
      color:#f9fafb;
      text-shadow:0 0 10px rgba(15,23,42,0.9);
    }
    .hero-subtitle{ font-size:14px; max-width:620px; color:#e5e7eb; line-height:1.45; }
    .hero-tags{ display:flex; flex-wrap:wrap; gap:8px; margin-top:6px; }
    .hero-tag{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      background:rgba(15,23,42,0.7);
      border:1px solid rgba(148,163,184,0.4);
    }

    .page-section{ margin:32px auto 0; max-width:1200px; padding:0 24px; }

    .section-title{
      font-family:"Press Start 2P",system-ui;
      font-size:16px;
      text-transform:uppercase;
      text-align:center;
      padding:12px 16px;
      margin:0 0 18px;
      background:linear-gradient(90deg,#7c3aed,#ec4899);
      color:#0b1120;
      border-radius:999px;
      letter-spacing:.08em;
    }

    /* ===== –§–ò–õ–¨–¢–†–´ ===== */
    .filters{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin:0 0 18px;
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.25);
      background:rgba(2,6,23,0.55);
      box-shadow:0 10px 22px rgba(0,0,0,0.18);
    }

    .filter-left{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .chip{
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(15,23,42,0.7);
      color:#e5e7eb;
      padding:8px 12px;
      border-radius:999px;
      cursor:pointer;
      font-size:12px;
      transition:.15s;
      display:inline-flex;
      gap:8px;
      align-items:center;
      user-select:none;
    }
    .chip:hover{ border-color:#38bdf8; color:#e0f2fe; }
    .chip.active{
      border-color:#38bdf8;
      background:rgba(56,189,248,0.12);
      color:#e0f2fe;
      font-weight:600;
    }
    .chip small{
      font-size:11px;
      color:#9ca3af;
      font-weight:600;
      background:rgba(2,6,23,0.55);
      border:1px solid rgba(148,163,184,0.18);
      padding:2px 8px;
      border-radius:999px;
    }

    .filter-right{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .search{
      display:flex;
      align-items:center;
      gap:8px;
      border-radius:999px;
      padding:8px 12px;
      border:1px solid rgba(148,163,184,0.25);
      background:rgba(15,23,42,0.7);
      min-width:240px;
    }
    .search input{
      width:100%;
      border:none;
      outline:none;
      background:transparent;
      color:#e5e7eb;
      font-size:13px;
    }
    .search input::placeholder{ color:#94a3b8; }

    .sort{
      border-radius:999px;
      padding:8px 12px;
      border:1px solid rgba(148,163,184,0.25);
      background:rgba(15,23,42,0.7);
      color:#e5e7eb;
      font-size:13px;
      outline:none;
      cursor:pointer;
    }

    /* ===== –°–ï–¢–ö–ê –ü–†–û–ï–ö–¢–û–í ===== */
    .project-grid{
      display:grid;
      gap:18px;
      grid-template-columns:repeat(2, minmax(0, 1fr));
    }
    @media (max-width: 900px){ .project-grid{ grid-template-columns:1fr; } }

    /* ===== –ö–ê–†–¢–û–ß–ö–ê ===== */
    .project-card{
      background:rgba(15,23,42,0.9);
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(148,163,184,0.35);
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s;
      cursor:pointer;
      position:relative;
    }
    .project-card:hover{
      transform:translateY(-4px);
      box-shadow:0 18px 35px rgba(15,23,42,0.8);
      border-color:#38bdf8;
    }

    /* —Ç—ç–≥–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ */
    .badge-row{
      position:absolute;
      left:12px;
      top:12px;
      z-index:3;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      max-width:calc(100% - 24px);
      pointer-events:none;
    }
    .badge{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      background:rgba(2,6,23,0.72);
      border:1px solid rgba(148,163,184,0.25);
      color:#e0f2fe;
      backdrop-filter:blur(6px);
      white-space:nowrap;
    }

    /* ===== –°–õ–ê–ô–î–ï–† ===== */
    .project-slider{
      position:relative;
      width:100%;
      height:220px;
      overflow:hidden;
      background:rgba(2,6,23,0.35);
    }
    .project-slider img{
      width:100%;
      height:220px;
      object-fit:cover;
      display:none;
      user-select:none;
      pointer-events:none;
    }
    .project-slider img.active{ display:block; }

    .slider-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:36px;
      height:36px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.35);
      background:rgba(2,6,23,0.75);
      color:#e5e7eb;
      font-size:18px;
      cursor:pointer;
      display:grid;
      place-items:center;
      opacity:0;
      transition:.15s;
      z-index:4;
      box-shadow:0 10px 22px rgba(0,0,0,0.25);
    }
    .project-card:hover .slider-btn{ opacity:1; }
    .slider-btn:hover{ border-color:#38bdf8; color:#e0f2fe; }
    .slider-prev{ left:10px; }
    .slider-next{ right:10px; }

    .project-info{ padding:14px 16px 16px; }
    .project-name{
      font-family:"Press Start 2P",system-ui;
      font-size:11px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:#e0f2fe;
      margin:0 0 10px;
    }
    .project-desc{
      margin:0;
      font-size:13px;
      color:#cbd5f5;
      line-height:1.4;
    }

    /* ===== –ë–õ–û–ö –°–û–¶–°–ï–¢–ï–ô ===== */
    .social-card{
      margin-top:22px;
      background:rgba(15,23,42,0.9);
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.35);
      padding:16px;
      text-align:center;
      box-shadow:0 10px 24px rgba(15,23,42,0.55);
    }
    .social-title{
      font-family:"Press Start 2P",system-ui;
      font-size:12px;
      letter-spacing:.08em;
      text-transform:uppercase;
      margin:0 0 12px;
      color:#e0f2fe;
    }
    .social-links{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center; }
    .social-btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
      border-radius:999px;
      text-decoration:none;
      color:#0b1120;
      background:linear-gradient(90deg,#0ea5e9,#38bdf8);
      border:1px solid rgba(148,163,184,0.25);
      font-weight:700;
      font-size:13px;
      transition:.15s;
    }
    .social-btn:hover{ filter:brightness(1.05); transform:translateY(-1px); }
    .social-muted{ margin:10px 0 0; font-size:12px; color:#9ca3af; }

    /* ===== –ú–û–î–ê–õ–ö–ê (–≥–∞–ª–µ—Ä–µ—è) ===== */
    .modal{
      display:none;
      position:fixed;
      inset:0;
      z-index:9999;
      background:rgba(0,0,0,0.78);
      justify-content:center;
      align-items:center;
      padding:18px;
    }
    .modal.open{ display:flex; }

    .modal-box{
      width:min(1100px, 96vw);
      max-height:92vh;
      background:rgba(2,6,23,0.92);
      border:1px solid rgba(148,163,184,0.25);
      border-radius:16px;
      overflow:hidden;
      box-shadow:0 24px 80px rgba(0,0,0,0.55);
      display:flex;
      flex-direction:column;
    }

    .modal-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 12px;
      border-bottom:1px solid rgba(148,163,184,0.18);
      background:rgba(15,23,42,0.55);
    }

    .modal-title{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:0;
    }
    .modal-title b{
      font-family:"Press Start 2P",system-ui;
      font-size:11px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:#e0f2fe;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:70vw;
    }
    .modal-title span{
      color:#9ca3af;
      font-size:12px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:70vw;
    }

    .modal-actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .mbtn{
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(15,23,42,0.75);
      color:#e5e7eb;
      padding:8px 10px;
      border-radius:999px;
      cursor:pointer;
      font-size:12px;
      transition:.15s;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .mbtn:hover{ border-color:#38bdf8; color:#e0f2fe; }

    .modal-main{
      position:relative;
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(2,6,23,0.55);
      min-height:320px;
    }
    .modal-main img{
      max-width:100%;
      max-height:62vh;
      object-fit:contain;
      display:block;
      user-select:none;
    }

    .nav-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:44px;
      height:44px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.35);
      background:rgba(2,6,23,0.78);
      color:#e5e7eb;
      font-size:20px;
      cursor:pointer;
      display:grid;
      place-items:center;
      transition:.15s;
      box-shadow:0 10px 22px rgba(0,0,0,0.35);
    }
    .nav-btn:hover{ border-color:#38bdf8; color:#e0f2fe; }
    .nav-prev{ left:12px; }
    .nav-next{ right:12px; }

    .thumbs{
      padding:10px 12px 12px;
      border-top:1px solid rgba(148,163,184,0.18);
      background:rgba(15,23,42,0.45);
      display:flex;
      gap:8px;
      overflow:auto;
    }
    .thumb{
      width:92px;
      height:56px;
      border-radius:12px;
      overflow:hidden;
      flex:0 0 auto;
      border:1px solid rgba(148,163,184,0.25);
      cursor:pointer;
      opacity:.85;
      transition:.15s;
      background:rgba(2,6,23,0.55);
    }
    .thumb:hover{ border-color:#38bdf8; opacity:1; }
    .thumb.active{ border-color:#38bdf8; opacity:1; box-shadow:0 10px 16px rgba(0,0,0,0.28); }
    .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }

    /* ===== –ê–î–ê–ü–¢–ò–í ===== */
    @media (max-width:900px){
      .layout{ flex-direction:column; }
      .sidebar-fab{ display:none; }
      .hero-overlay{ padding-left:20px; padding-right:16px; }
      .hero-title{ font-size:14px; }
      .hero{ height:220px; }
      .search{ min-width:180px; width:100%; }
      .filter-right{ width:100%; justify-content:stretch; }
      .filters{ align-items:stretch; }
    }
  </style>
</head>

<body>
  <button class="sidebar-fab" id="toggleSidebar" type="button" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å">
    <span id="sidebarIcon">&lt;</span>
  </button>

  <div class="layout">
    <aside class="sidebar">
      <div>
        <div class="logo-box">
          <img src="logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø MS Builders" />
          <div class="sidebar-title">
            MS Builders
            <span>Minecraft —Å–µ—Ä–≤–µ—Ä</span>
          </div>
        </div>

        <button class="server-copy" id="copyIp" type="button" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å IP">
          <span class="server-ip">play.msbuilders2.ru</span>
          <span class="server-ver">–í–µ—Ä—Å–∏—è: 1.21.8</span>
          <span class="server-tip">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</span>
        </button>
      </div>

      <nav class="sidebar-nav">
        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a>
        <a href="extra.html">–ü–ª–∞–≥–∏–Ω—ã –∏ –¥–∞—Ç–∞–ø–∞–∫–∏</a>
        <a href="enchants.html">–ß–∞—Ä—ã</a>
        <a href="projects.html" class="active">–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</a>
        <a href="builds.html">–ü–æ—Å—Ç—Ä–æ–π–∫–∏</a>
        <a href="crafts.html">–ö—Ä–∞—Ñ—Ç—ã</a>
        <a href="story.html">–°—é–∂–µ—Ç</a>
        <a href="about.html">–û —Å–µ—Ä–≤–µ—Ä–µ</a>
      </nav>
    </aside>

    <main class="content">
      <section class="hero">
        <img src="projects-banner.png" alt="–ü—Ä–æ–µ–∫—Ç—ã MS Builders" />
        <div class="hero-overlay">
          <div class="hero-title">–Ω–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</div>
          <div class="hero-subtitle">
            –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ MS Builders: —Å–ø–∞–≤–Ω—ã, –ª–æ–±–±–∏, –∑–¥–∞–Ω–∏—è, –≥–æ—Ä–æ–¥–∞ –∏ –∫–æ–Ω–∫—É—Ä—Å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã.
            –û—Ç–∫—Ä—ã–≤–∞–π –∫–∞—Ä—Ç–æ—á–∫—É ‚Äî –∏ –ª–∏—Å—Ç–∞–π –≤—Å–µ —Ñ–æ—Ç–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏.
          </div>
          <div class="hero-tags">
            <span class="hero-tag">–ö–æ–º–º–µ—Ä—Ü–∏—è</span>
            <span class="hero-tag">–°–ø–∞–≤–Ω—ã</span>
            <span class="hero-tag">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</span>
            <span class="hero-tag">–§—ç–Ω—Ç–µ–∑–∏</span>
          </div>
        </div>
      </section>

      <section class="page-section">
        <h2 class="section-title">–ü–û–†–¢–§–û–õ–ò–û</h2>

        <!-- –§–ò–õ–¨–¢–†–´ -->
        <div class="filters">
          <div class="filter-left" id="chipBar"></div>

          <div class="filter-right">
            <div class="search">
              üîé
              <input id="searchInput" type="text" placeholder="–ü–æ–∏—Å–∫: —Å–ø–∞–≤–Ω, –≤–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π, –Ω–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞..." />
            </div>

            <select class="sort" id="sortSelect" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">
              <option value="new">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤–æ–µ</option>
              <option value="az">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (A‚Äì–Ø)</option>
            </select>
          </div>
        </div>

        <!-- –°–ï–¢–ö–ê -->
        <div class="project-grid" id="grid"></div>

        <div class="social-card">
          <h3 class="social-title">—Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</h3>

          <div class="social-links">
            <a class="social-btn" href="https://vk.com/msbuildersminecraft" target="_blank" rel="noopener">VK</a>
            <a class="social-btn" href="https://discord.com/invite/Wj8jWS736f" target="_blank" rel="noopener">Discord</a>
            <a class="social-btn" href="mailto:Komand.or@mail.ru">–ü–æ—á—Ç–∞</a>
          </div>

          <p class="social-muted">–ë—ã—Å—Ç—Ä–æ —Å–¥–µ–ª–∞–µ–º: —Å–ø–∞–≤–Ω/–ª–æ–±–±–∏, –≥–æ—Ä–æ–¥, –Ω–∞–±–æ—Ä –∑–¥–∞–Ω–∏–π, –∏–Ω—Ç–µ—Ä—å–µ—Ä, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è –∏–≤–µ–Ω—Ç–æ–≤.</p>
        </div>
      </section>
    </main>
  </div>

  <!-- –ú–û–î–ê–õ–ö–ê-–ì–ê–õ–ï–†–ï–Ø -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-box" role="dialog" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–µ–∫—Ç–∞">
      <div class="modal-top">
        <div class="modal-title">
          <b id="mTitle">–ü—Ä–æ–µ–∫—Ç</b>
          <span id="mMeta">1 / 1</span>
        </div>

        <div class="modal-actions">
          <button class="mbtn" id="mPrevProject" type="button" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–æ–µ–∫—Ç (Shift + ‚Üê)">‚üµ –ü—Ä–æ–µ–∫—Ç</button>
          <button class="mbtn" id="mNextProject" type="button" title="–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç (Shift + ‚Üí)">–ü—Ä–æ–µ–∫—Ç ‚ü∂</button>
          <button class="mbtn" id="mClose" type="button" title="–ó–∞–∫—Ä—ã—Ç—å (Esc)">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </div>

      <div class="modal-main">
        <button class="nav-btn nav-prev" id="mPrev" type="button" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">‚Äπ</button>
        <img id="mImg" src="" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" />
        <button class="nav-btn nav-next" id="mNext" type="button" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">‚Ä∫</button>
      </div>

      <div class="thumbs" id="mThumbs" aria-label="–ü—Ä–µ–≤—å—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π"></div>
    </div>
  </div>

  <script>
    const root = document.documentElement;

    // ===== –°–ê–ô–î–ë–ê–† =====
    const btnSidebar = document.getElementById("toggleSidebar");
    const sidebarIcon = document.getElementById("sidebarIcon");

    const sidebarOff = localStorage.getItem("ms_sidebar") === "off";
    if (sidebarOff) root.classList.add("sidebar-collapsed");

    function syncSidebarIcon(){
      sidebarIcon.textContent = root.classList.contains("sidebar-collapsed") ? ">" : "<";
    }
    syncSidebarIcon();

    btnSidebar.addEventListener("click", () => {
      root.classList.toggle("sidebar-collapsed");
      localStorage.setItem("ms_sidebar", root.classList.contains("sidebar-collapsed") ? "off" : "on");
      syncSidebarIcon();
    });

    // ===== –ö–û–ü–ò–†–û–í–ê–ù–ò–ï IP =====
    const copyBtn = document.getElementById("copyIp");
    if (copyBtn){
      copyBtn.addEventListener("click", async () => {
        const ip = "play.msbuilders2.ru";
        try{
          await navigator.clipboard.writeText(ip);
        }catch(e){
          const ta = document.createElement("textarea");
          ta.value = ip;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          document.body.removeChild(ta);
        }
        copyBtn.classList.add("copied");
        setTimeout(() => copyBtn.classList.remove("copied"), 1200);
      });
    }

    // ===== –î–ê–ù–ù–´–ï –ü–†–û–ï–ö–¢–û–í =====
    // –ü—É—Ç—å –∫ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º (–æ—Å—Ç–∞–≤–∏–ª —Ç–≤–æ–π): images/images/projects/
    const IMG_DIR = "images/images/projects/";

    // helper: —Å–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ (base_1.png ... base_N.png)
    function makeIndexed(base, count){
      const out = [];
      for (let i = 1; i <= count; i++){
        out.push(`${IMG_DIR}${base}_${i}.png`);
      }
      return out;
    }

    // helper: –æ–¥–∏–Ω–æ—á–Ω—ã–π —Ñ–∞–π–ª (base.png)
    function makeSingle(fileBase){
      return [`${IMG_DIR}${fileBase}.png`];
    }

    // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞)
    const CATS = [
      { key:"all", label:"–í—Å–µ" },
      { key:"spawns", label:"–°–ø–∞–≤–Ω—ã" },
      { key:"lobbies", label:"–õ–æ–±–±–∏" },
      { key:"buildings", label:"–ó–¥–∞–Ω–∏—è" },
      { key:"areas", label:"–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏" },
      { key:"villages", label:"–î–µ—Ä–µ–≤–Ω–∏/–ì–æ—Ä–æ–¥–∞" },
      { key:"contest", label:"–ö–æ–Ω–∫—É—Ä—Å" },
    ];

    // –í–ê–ñ–ù–û:
    // - –µ—Å–ª–∏ –≤–¥—Ä—É–≥ —É —Ç–µ–±—è –∫–∞–∫–∏–µ-—Ç–æ —Ñ–∞–π–ª—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –∏–Ω–∞—á–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä z1_1.png vs z1-1.png) ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–∞–≤—å base.
    const PROJECTS = [
      // === —Å—Ç–∞—Ä—ã–µ ===
      { id:"pr1", title:"–û—Å—Ç—Ä–æ–≤ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π", desc:"–ü–æ—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤–æ –≤—Ä–µ–º—è –∫–æ–Ω–∫—É—Ä—Å–∞.", cat:"contest", tags:["–ö–æ–Ω–∫—É—Ä—Å","–ò–≤–µ–Ω—Ç"], images: makeIndexed("pr1", 5) },
      { id:"pr2", title:"–ú–µ–¥–Ω–∞—è –¥–µ—Ä–µ–≤–Ω—è", desc:"–ü—Ä–æ–µ–∫—Ç –≤ –≤—ã–∂–∏–≤–∞–Ω–∏–∏: —É—é—Ç–Ω—ã–π —Å—Ç–∏–ª—å + –¥–µ—Ç–∞–ª–∏ –∏–∑ –º–µ–¥–∏.", cat:"villages", tags:["–í—ã–∂–∏–≤–∞–Ω–∏–µ","–î–µ—Ä–µ–≤–Ω—è"], images: makeIndexed("pr2", 5) },
      { id:"sp1", title:"–°–ø–∞–≤–Ω –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–º —Å—Ç–∏–ª–µ", desc:"–§—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω—ã–π —Å–ø–∞–≤–Ω/—Ö–∞–± —Å –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–ö–æ—Å–º–æ—Å"], images: makeIndexed("sp1", 3) },
      { id:"sp2", title:"–°–ø–∞–≤–Ω 2-–≥–æ —Å–µ–∑–æ–Ω–∞", desc:"–ì–ª–∞–≤–Ω—ã–π —Å–ø–∞–≤–Ω –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ 2-–≥–æ —Å–µ–∑–æ–Ω–∞.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–°–µ–∑–æ–Ω"], images: makeIndexed("sp2", 5) },
      { id:"pr3", title:"–ü—Ä–æ–µ–∫—Ç –≥–æ—Ä–æ–¥–∞", desc:"–ë–æ–ª—å—à–æ–π –≥–æ—Ä–æ–¥—Å–∫–æ–π –ø—Ä–æ–µ–∫—Ç: –∫–≤–∞—Ä—Ç–∞–ª—ã, —É–ª–∏—Ü—ã, –º–∞—Å—à—Ç–∞–±—ã.", cat:"villages", tags:["–ì–æ—Ä–æ–¥","–ú–∞—Å—à—Ç–∞–±"], images: makeIndexed("pr3", 5) },
      { id:"pr4", title:"–ü—Ä–æ–µ–∫—Ç ¬´–ë–∞–≥—Ä–∞—Ç–∏–æ–Ω¬ª", desc:"–ù–µ–æ–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç: —Å—Ç—Ä–æ–≥–∏–µ —Ñ–æ—Ä–º—ã –∏ –º–æ–Ω—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å.", cat:"buildings", tags:["–ù–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞"], images: makeIndexed("pr4", 3) },

      // === –Ω–æ–≤—ã–µ –∏–∑ —Ç–≤–æ–µ–≥–æ —Å–ø–∏—Å–∫–∞ ===
      { id:"zd5", title:"–í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–æ–µ –∑–¥–∞–Ω–∏–µ", desc:"–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤ –≤–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–æ–º —Å—Ç–∏–ª–µ: –∞–∫—Ü–µ–Ω—Ç—ã, —Ñ–∞—Å–∞–¥—ã, –¥–µ–∫–æ—Ä.", cat:"buildings", tags:["–í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π","–ó–¥–∞–Ω–∏–µ"], images: makeIndexed("zd5", 3) },

      { id:"z1", title:"–ó–¥–∞–Ω–∏—è MSB2", desc:"–ü–æ–¥–±–æ—Ä–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–∫ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å MSB2 (—Å–µ—Ä–∏—è –∑–¥–∞–Ω–∏–π).", cat:"buildings", tags:["MSB2","–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞"], images: makeIndexed("z1", 3) },

      { id:"d5", title:"–ë–∞–≥—Ä–æ–≤—ã–π –∞–º–±–∞—Ä", desc:"–õ–∞–∫–æ–Ω–∏—á–Ω—ã–π –∞–º–±–∞—Ä –≤ –±–∞–≥—Ä–æ–≤–æ–π –ø–∞–ª–∏—Ç—Ä–µ (—Ä–∞–±–æ—Ç–∞ Boatswain).", cat:"buildings", tags:["–ê–º–±–∞—Ä","–°—Ç–∏–ª—å"], images: makeSingle("d5") },

      { id:"d5x", title:"–§—ç–Ω—Ç–µ–∑–∏ –¥–µ—Ä–µ–≤–Ω—è –Ω–∞ –¥—Ä–µ–≤–µ", desc:"–î–µ—Ä–µ–≤–Ω—è –Ω–∞ –≤–µ—Ç–≤—è—Ö –æ–≥—Ä–æ–º–Ω–æ–≥–æ –¥—Ä–µ–≤–∞ (–¥–ª—è t2x2).", cat:"villages", tags:["–§—ç–Ω—Ç–µ–∑–∏","–î–µ—Ä–µ–≤–Ω—è"], images: makeIndexed("d5_1", 5) /* —Å–º. –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –Ω–∏–∂–µ */ },

      { id:"d6", title:"–§—ç–Ω—Ç–µ–∑–∏ –¥–æ–º–∏–∫", desc:"–î–æ–º–∏–∫ –≤ —Ñ—ç–Ω—Ç–µ–∑–∏ —Å—Ç–∏–ª–µ ¬´–∫–∞–∫ —Å Pinterest¬ª: —É—é—Ç + –¥–µ—Ç–∞–ª–∏.", cat:"buildings", tags:["–§—ç–Ω—Ç–µ–∑–∏","–î–æ–º"], images: makeIndexed("d6", 3) },

      { id:"d52", title:"–ù–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞ / —Ü–∞—Ä—Å–∫–∞—è –≤—ã—Å–æ—Ç–∫–∞", desc:"–ó–¥–∞–Ω–∏–µ –≤ –Ω–µ–æ–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º —Å—Ç–∏–ª–µ: —Å—Ç—Ä–æ–≥–∏–µ –ª–∏–Ω–∏–∏ –∏ –≤—ã—Å–æ—Ç–Ω–æ—Å—Ç—å.", cat:"buildings", tags:["–ù–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞","–í—ã—Å–æ—Ç–∫–∞"], images: makeSingle("d52") },

      { id:"d61", title:"–ù–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞ (–≤–∞—Ä–∏–∞–Ω—Ç)", desc:"–í—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –Ω–µ–æ–∫–ª–∞—Å—Å–∏–∫–µ ‚Äî –¥—Ä—É–≥–æ–π —Ñ–∞—Å–∞–¥/–∫–æ–º–ø–æ–∑–∏—Ü–∏—è.", cat:"buildings", tags:["–ù–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞"], images: makeSingle("d61") },

      { id:"kor", title:"–ü—É—Å—Ç—ã–Ω–Ω—ã–π –∫–æ—Ä–∞–±–ª—å", desc:"–ö–æ—Ä–∞–±–ª—å –¥–ª—è –∫–æ–Ω–∫—É—Ä—Å–∞ –≤ –ø—É—Å—Ç—ã–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–µ.", cat:"contest", tags:["–ö–æ–Ω–∫—É—Ä—Å","–ü—É—Å—Ç—ã–Ω—è"], images: makeIndexed("kor", 3) },

      { id:"l1", title:"–õ–æ–±–±–∏/—Å–ø–∞–≤–Ω (—Ñ—ç–Ω—Ç–µ–∑–∏)", desc:"–§—ç–Ω—Ç–µ–∑–∏ –ª–æ–±–±–∏/—Å–ø–∞–≤–Ω: —Å–∫–∞–∑–æ—á–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∏ –º–∞—Å—à—Ç–∞–±.", cat:"lobbies", tags:["–õ–æ–±–±–∏","–§—ç–Ω—Ç–µ–∑–∏"], images: makeIndexed("l1", 5) },

      { id:"sp3", title:"–°–ø–∞–≤–Ω –≤ –∫–∏—Ç–∞–π—Å–∫–æ–º —Å—Ç–∏–ª–µ", desc:"–°–ø–∞–≤–Ω –≤ —Ñ–æ—Ä–º–µ –ø–æ–ª—É–º–µ—Å—è—Ü–∞: –∫–∏—Ç–∞–π—Å–∫–∞—è —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∞ –∏ —Å–∏–º–≤–æ–ª–∏–∫–∞.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–ö–∏—Ç–∞–π"], images: makeIndexed("sp3", 6) },

      { id:"s4", title:"–ê–¥—Å–∫–∏–π —Å–ø–∞–≤–Ω", desc:"–°–ø–∞–≤–Ω –≤ –∞–¥—Å–∫–æ–π —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–µ: –∂–∞—Ä, –±–∞–∑–∞–ª—å—Ç, –±–∞–≥—Ä–æ–≤—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–ê–¥"], images: makeIndexed("s4", 5) },

      { id:"sp5", title:"–§—ç–Ω—Ç–µ–∑–∏-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å–ø–∞–≤–Ω", desc:"–°–º–µ—Å—å —Ñ—ç–Ω—Ç–µ–∑–∏ –∏ —Ç–µ—Ö–Ω–æ: –º–µ—Ö–∞–Ω–∏–∫–∞, —Ñ–æ—Ä–º—ã, ¬´–º–∞–≥-–∏–Ω–∂¬ª –≤–∞–π–±.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–¢–µ—Ö–Ω–æ"], images: makeIndexed("sp5", 5) },

      { id:"sp7", title:"–Ø–ø–æ–Ω—Å–∫–∏–π —Å–ø–∞–≤–Ω", desc:"–°–ø–∞–≤–Ω –≤ —è–ø–æ–Ω—Å–∫–æ–º —Å—Ç–∏–ª–µ: –≥–∞—Ä–º–æ–Ω–∏—è, —Ñ–æ—Ä–º—ã, —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –º–æ—Ç–∏–≤—ã.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–Ø–ø–æ–Ω–∏—è"], images: makeIndexed("sp7", 6) },

      { id:"sp6", title:"–°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—ã–π —Å–ø–∞–≤–Ω", desc:"–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–µ–¥–∏–≤–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å: –∫–∞–º–µ–Ω—å, –¥–µ—Ä–µ–≤–æ, –±–∞—à–Ω–∏.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å–µ"], images: makeIndexed("sp6", 5) },

      { id:"l2", title:"–õ–æ–±–±–∏/—Å–ø–∞–≤–Ω (–∫–∏—Ç–∞–π—Å–∫–∏–π —Å—Ç–∏–ª—å)", desc:"–õ–æ–±–±–∏/—Å–ø–∞–≤–Ω —Å –∫–∏—Ç–∞–π—Å–∫–æ–π —ç—Å—Ç–µ—Ç–∏–∫–æ–π: –∞—Ä–∫–∏, –∫—Ä—ã—à–∏, —Ñ–æ–Ω–∞—Ä–∏.", cat:"lobbies", tags:["–õ–æ–±–±–∏","–ö–∏—Ç–∞–π"], images: makeIndexed("l2", 3) },

      { id:"sp8", title:"–°–ø–∞–≤–Ω ¬´4 –≤—Ä–µ–º–µ–Ω–∏ –≥–æ–¥–∞¬ª", desc:"–°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—ã–π —Å–ø–∞–≤–Ω, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–π –Ω–∞ 4 —Å–µ–∑–æ–Ω–∞ ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–°–µ–∑–æ–Ω—ã"], images: makeIndexed("sp8", 5) },

      { id:"sp9", title:"–ì—Ä–µ—á–µ—Å–∫–∏–π —Å–ø–∞–≤–Ω", desc:"–°–ø–∞–≤–Ω –≤ –≥—Ä–µ—á–µ—Å–∫–æ–º —Å—Ç–∏–ª–µ (–ø–æ–¥ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é): –∫–æ–ª–æ–Ω–Ω—ã –∏ –º—Ä–∞–º–æ—Ä.", cat:"spawns", tags:["–°–ø–∞–≤–Ω","–ì—Ä–µ—Ü–∏—è"], images: makeIndexed("sp9", 3) },

      { id:"zon1", title:"–§—ç–Ω—Ç–µ–∑–∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è (MSB2)", desc:"–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è/–ª–æ–∫–∞—Ü–∏—è –≤ —Ñ—ç–Ω—Ç–µ–∑–∏ —Å—Ç–∏–ª–µ –Ω–∞ MSB2.", cat:"areas", tags:["–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è","–§—ç–Ω—Ç–µ–∑–∏"], images: makeIndexed("zon1", 3) },

      { id:"lob3", title:"–õ–æ–±–±–∏/—Å–ø–∞–≤–Ω (—Å–º–µ—à–∞–Ω–Ω–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏)", desc:"–°–º–µ—à–∞–Ω–Ω—ã–π —Ñ—ç–Ω—Ç–µ–∑–∏-—Å—Ç–∏–ª—å: —Ä–∞–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–ª–æ–∏.", cat:"lobbies", tags:["–õ–æ–±–±–∏","–§—ç–Ω—Ç–µ–∑–∏"], images: makeIndexed("lob3", 3) },
    ];

    /**
     * –í–ê–ñ–ù–û–ï –ü–†–ò–ú–ï–ß–ê–ù–ò–ï –ø–æ d5_1-5:
     * –¢—ã –Ω–∞–ø–∏—Å–∞–ª: d5_1-5 (–§—ç–Ω—Ç–µ–∑–∏ –¥–µ—Ä–µ–≤–Ω—è...) ‚Äî –æ–±—ã—á–Ω–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç —Ñ–∞–π–ª—ã d5_1.png ... d5_5.png.
     * –í —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª makeIndexed("d5_1", 5) (—Ç–æ –µ—Å—Ç—å d5_1_1.png ...).
     * –ï—Å–ª–∏ —É —Ç–µ–±—è —Ä–µ–∞–ª—å–Ω–æ —Ñ–∞–π–ª—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è d5_1.png, d5_2.png ... d5_5.png ‚Äî
     * —Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏ –≤ –º–∞—Å—Å–∏–≤–µ PROJECTS —Å—Ç—Ä–æ–∫—É:
     *   images: makeIndexed("d5_1", 5)
     * –Ω–∞:
     *   images: (function(){ const a=[]; for(let i=1;i<=5;i++) a.push(`${IMG_DIR}d5_${i}.png`); return a; })()
     */
    // –º–∞–ª–µ–Ω—å–∫–∏–π —Ñ–∏–∫—Å ‚Äú–Ω–∞ –≤—Å—è–∫–∏–π‚Äù ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø—Ä–∞–≤–∏–º d5_1-5 –Ω–∞ d5_1..d5_5
    (function fixD5(){
      const p = PROJECTS.find(x => x.id === "d5x");
      if (!p) return;
      // –ï—Å–ª–∏ —É —Ç–µ–±—è –Ω–µ—Ç d5_1_1.png, –∞ –µ—Å—Ç—å d5_1.png... ‚Äî –≤–∫–ª—é—á–∏ —Å—Ç—Ä–æ–∫—É –Ω–∏–∂–µ:
      p.images = (function(){
        const a = [];
        for (let i=1;i<=5;i++) a.push(`${IMG_DIR}d5_${i}.png`);
        return a;
      })();
    })();

    // ===== UI: –ß–ò–ü–´ –§–ò–õ–¨–¢–†–ê =====
    const chipBar = document.getElementById("chipBar");
    const searchInput = document.getElementById("searchInput");
    const sortSelect = document.getElementById("sortSelect");
    const grid = document.getElementById("grid");

    let state = {
      cat: "all",
      q: "",
      sort: "new",
    };

    function getVisibleProjects(){
      let arr = [...PROJECTS];

      // —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
      if (state.cat !== "all"){
        arr = arr.filter(p => p.cat === state.cat);
      }

      // –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–æ–ø–∏—Å–∞–Ω–∏—é/—Ç—ç–≥–∞–º
      const q = state.q.trim().toLowerCase();
      if (q){
        arr = arr.filter(p => {
          const hay = `${p.title} ${p.desc} ${(p.tags||[]).join(" ")}`.toLowerCase();
          return hay.includes(q);
        });
      }

      // —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
      if (state.sort === "az"){
        arr.sort((a,b) => a.title.localeCompare(b.title, "ru"));
      } else {
        // "new" ‚Äî –∫–∞–∫ –≤ —Å–ø–∏—Å–∫–µ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∏–∂–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–≤–µ—Ä—Ö, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å)
        // –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Ä—è–¥–æ–∫ –º–∞—Å—Å–∏–≤–∞
      }

      return arr;
    }

    function countByCat(){
      const counts = {};
      for (const c of CATS) counts[c.key] = 0;
      counts.all = PROJECTS.length;
      for (const p of PROJECTS){
        if (counts[p.cat] === undefined) counts[p.cat] = 0;
        counts[p.cat]++;
      }
      return counts;
    }

    function renderChips(){
      const counts = countByCat();
      chipBar.innerHTML = "";

      for (const c of CATS){
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "chip" + (state.cat === c.key ? " active" : "");
        btn.dataset.cat = c.key;

        const label = document.createElement("span");
        label.textContent = c.label;

        const num = document.createElement("small");
        num.textContent = counts[c.key] ?? 0;

        btn.appendChild(label);
        btn.appendChild(num);

        btn.addEventListener("click", () => {
          state.cat = c.key;
          renderChips();
          renderGrid();
        });

        chipBar.appendChild(btn);
      }
    }

    // ===== –†–ï–ù–î–ï–† –ö–ê–†–¢–û–ß–ï–ö (–≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ HTML) =====
    function renderGrid(){
      const items = getVisibleProjects();
      grid.innerHTML = "";

      for (const p of items){
        const card = document.createElement("article");
        card.className = "project-card";
        card.dataset.id = p.id;
        card.dataset.cat = p.cat;

        // badges
        const badges = document.createElement("div");
        badges.className = "badge-row";
        const topBadges = (p.tags || []).slice(0, 3);
        for (const t of topBadges){
          const b = document.createElement("span");
          b.className = "badge";
          b.textContent = t;
          badges.appendChild(b);
        }

        // slider
        const slider = document.createElement("div");
        slider.className = "project-slider";

        const imgs = p.images.map((src, idx) => {
          const im = document.createElement("img");
          im.src = src;
          im.alt = `${p.id} ${idx+1}`;
          if (idx === 0) im.classList.add("active");
          slider.appendChild(im);
          return im;
        });

        // prev/next –≤ –∫–∞—Ä—Ç–æ—á–∫–µ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ > 1 —Ñ–æ—Ç–æ
        if (p.images.length > 1){
          const prev = document.createElement("button");
          prev.className = "slider-btn slider-prev";
          prev.type = "button";
          prev.setAttribute("aria-label", "–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ");
          prev.textContent = "‚Äπ";

          const next = document.createElement("button");
          next.className = "slider-btn slider-next";
          next.type = "button";
          next.setAttribute("aria-label", "–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ");
          next.textContent = "‚Ä∫";

          slider.appendChild(prev);
          slider.appendChild(next);

          let idx = 0;
          function show(i){
            imgs.forEach(x => x.classList.remove("active"));
            imgs[i].classList.add("active");
          }

          prev.addEventListener("click", (e) => {
            e.stopPropagation();
            idx = (idx - 1 + imgs.length) % imgs.length;
            show(idx);
          });

          next.addEventListener("click", (e) => {
            e.stopPropagation();
            idx = (idx + 1) % imgs.length;
            show(idx);
          });
        }

        // info
        const info = document.createElement("div");
        info.className = "project-info";

        const name = document.createElement("h3");
        name.className = "project-name";
        name.textContent = p.title;

        const desc = document.createElement("p");
        desc.className = "project-desc";
        desc.textContent = p.desc;

        info.appendChild(name);
        info.appendChild(desc);

        card.appendChild(badges);
        card.appendChild(slider);
        card.appendChild(info);

        // click => open modal gallery
        card.addEventListener("click", () => {
          const active = slider.querySelector("img.active");
          const activeSrc = active ? active.getAttribute("src") : p.images[0];
          const startIndex = Math.max(0, p.images.indexOf(activeSrc));
          openModalForProject(p.id, startIndex);
        });

        grid.appendChild(card);
      }

      // –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
      if (!items.length){
        const empty = document.createElement("div");
        empty.className = "social-card";
        empty.innerHTML = `
          <h3 class="social-title">–Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
          <p class="social-muted">–ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π —Ñ–∏–ª—å—Ç—Ä –∏–ª–∏ —Å–æ–∫—Ä–∞—Ç–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–∏—Å–∫–∞.</p>
        `;
        grid.appendChild(empty);
      }
    }

    // ===== –ü–û–ò–°–ö/–°–û–†–¢ =====
    searchInput.addEventListener("input", () => {
      state.q = searchInput.value;
      renderGrid();
    });

    sortSelect.addEventListener("change", () => {
      state.sort = sortSelect.value;
      renderGrid();
    });

    // ===== –ú–û–î–ê–õ–ö–ê: –ª–∏—Å—Ç–∞–µ–º —Ñ–æ—Ç–æ + –ª–∏—Å—Ç–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã =====
    const modal = document.getElementById("modal");
    const mTitle = document.getElementById("mTitle");
    const mMeta  = document.getElementById("mMeta");
    const mImg   = document.getElementById("mImg");
    const mThumbs = document.getElementById("mThumbs");
    const mClose = document.getElementById("mClose");
    const mPrev  = document.getElementById("mPrev");
    const mNext  = document.getElementById("mNext");
    const mPrevProject = document.getElementById("mPrevProject");
    const mNextProject = document.getElementById("mNextProject");

    let modalState = {
      projectId: null,
      imgIndex: 0,
      visibleList: [], // —Å–ø–∏—Å–æ–∫ id –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ —Ç–µ–∫—É—â–∏–º —Ñ–∏–ª—å—Ç—Ä–∞–º (—á—Ç–æ–±—ã –ª–∏—Å—Ç–∞—Ç—å "–≤—Å–µ —Ä–∞–±–æ—Ç—ã")
    };

    function getProjectById(id){
      return PROJECTS.find(p => p.id === id);
    }

    function setModalImage(){
      const p = getProjectById(modalState.projectId);
      if (!p) return;

      const total = p.images.length;
      const i = ((modalState.imgIndex % total) + total) % total;
      modalState.imgIndex = i;

      mTitle.textContent = p.title;
      mMeta.textContent = `${i+1} / ${total} ‚Ä¢ ${p.tags?.join(" ‚Ä¢ ") || ""}`.trim();

      mImg.src = p.images[i];

      // thumbs
      mThumbs.innerHTML = "";
      p.images.forEach((src, idx) => {
        const t = document.createElement("div");
        t.className = "thumb" + (idx === i ? " active" : "");
        t.title = `–§–æ—Ç–æ ${idx+1}`;

        const im = document.createElement("img");
        im.src = src;
        im.alt = `thumb ${idx+1}`;

        t.appendChild(im);
        t.addEventListener("click", (e) => {
          e.stopPropagation();
          modalState.imgIndex = idx;
          setModalImage();
        });

        mThumbs.appendChild(t);
      });

      // —Å–∫—Ä–æ–ª–ª –∫ –∞–∫—Ç–∏–≤–Ω–æ–º—É thumb
      const activeThumb = mThumbs.querySelector(".thumb.active");
      if (activeThumb){
        const left = activeThumb.offsetLeft - 60;
        mThumbs.scrollTo({ left, behavior: "smooth" });
      }
    }

    function openModalForProject(projectId, startIndex = 0){
      const p = getProjectById(projectId);
      if (!p) return;

      modalState.projectId = projectId;
      modalState.imgIndex = startIndex;

      // —Å–ø–∏—Å–æ–∫ –≤–∏–¥–∏–º—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ —Ç–µ–∫—É—â–∏–º —Ñ–∏–ª—å—Ç—Ä–∞–º/–ø–æ–∏—Å–∫—É
      modalState.visibleList = getVisibleProjects().map(x => x.id);

      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";

      setModalImage();
    }

    function closeModal(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden", "true");
      mImg.src = "";
      mThumbs.innerHTML = "";
      document.body.style.overflow = "";
      modalState.projectId = null;
      modalState.imgIndex = 0;
    }

    function nextImg(){ modalState.imgIndex++; setModalImage(); }
    function prevImg(){ modalState.imgIndex--; setModalImage(); }

    function nextProject(){
      const list = modalState.visibleList;
      if (!list.length) return;
      const idx = list.indexOf(modalState.projectId);
      const next = list[(idx + 1) % list.length];
      modalState.projectId = next;
      modalState.imgIndex = 0;
      setModalImage();
    }

    function prevProject(){
      const list = modalState.visibleList;
      if (!list.length) return;
      const idx = list.indexOf(modalState.projectId);
      const prev = list[(idx - 1 + list.length) % list.length];
      modalState.projectId = prev;
      modalState.imgIndex = 0;
      setModalImage();
    }

    mClose.addEventListener("click", closeModal);
    mNext.addEventListener("click", (e) => { e.stopPropagation(); nextImg(); });
    mPrev.addEventListener("click", (e) => { e.stopPropagation(); prevImg(); });
    mNextProject.addEventListener("click", (e) => { e.stopPropagation(); nextProject(); });
    mPrevProject.addEventListener("click", (e) => { e.stopPropagation(); prevProject(); });

    // –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É –∑–∞–∫—Ä—ã–≤–∞–µ—Ç (–Ω–æ –Ω–µ –ø–æ modal-box)
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeModal();
    });

    // –∫–ª–∞–≤–∏—à–∏
    document.addEventListener("keydown", (e) => {
      if (!modal.classList.contains("open")) return;

      if (e.key === "Escape") return closeModal();

      // —Ñ–æ—Ç–æ
      if (!e.shiftKey && (e.key === "ArrowRight")) return nextImg();
      if (!e.shiftKey && (e.key === "ArrowLeft"))  return prevImg();

      // –ø—Ä–æ–µ–∫—Ç—ã (Shift + —Å—Ç—Ä–µ–ª–∫–∏)
      if (e.shiftKey && (e.key === "ArrowRight")) return nextProject();
      if (e.shiftKey && (e.key === "ArrowLeft"))  return prevProject();
    });

    // ===== INIT =====
    renderChips();
    renderGrid();
  </script>
</body>
</html>
